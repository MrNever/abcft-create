#!/usr/bin/env node
const program = require('commander')
const figlet = require('figlet')
const checkForUpdate = require('update-check')
const pkg = require('../package.json')

program
  .version(pkg.version)
  .description(figlet.textSync('WELCOME TO ABCFE !', {
    horizontalLayout: 'default',
    verticalLayout: 'default'
  }))
  .usage(`[command] [options]`)
  .command('init', '初始化项目')
  .command('create', '新建一个页面或者组件项')
  .command('dev', '启动开发服务器')
  .command('build', '编译项目')
  .command('serve', '启动静态服务器')
  .command('update', '更新脚手架')
  .command('config', '配置用户信息')
  .command('info', '展示用户信息')
  .action(async () => {
    try {
      const update = await checkForUpdate(pkg)
      if (update) {
        console.log('脚手架工具有新版本更新，执行 apd update 升级')
      }
    } catch (err) {
      console.error(err)
    }
  })
  .parse(process.argv)