#!/usr/bin/env node
const program = require('commander')
const chalk = require('chalk')
const download  = require('download-git-repo')
const pkg = require('../package.json')
program.version(pkg.version)


program
  .command('b <pathName>')
  .alias('base')
  .option('--p', '创建pack架构')
  .description(chalk.yellow('创建一个基础架构，不带任何业务信息, --p 创建组件脚手架'))
  .action(function (pathName, option) {
    const path = option.p ? `direct:https://github.com/zasqw2222/abcFountByPack#rollup` : `direct:https://github.com/zasqw2222/abcftFront.git`
    download(path, pathName, { clone: true }, function (err) {
      if (err) {
        console.error(`错误: ${err}`)
      } else {
        console.log(`项目文件下载完毕。请运行 cd ${pathName} 处理git仓库信息，然后npm install`)
      }
    })
  })
program
  .command('*')
  .description(chalk.yellow('捕获错误'))
  .action(function () {
    console.log(chalk.magenta(`输入命令行不正确,输入 create-abcft-app --help、-h获取帮助`))
  })

program.parse(process.argv)